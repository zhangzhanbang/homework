---
  title : 制作HTML5游戏2 
---

### 制作HTML5游戏2——实验报告

#### 实验名称： 制作HTML5游戏2
#### 张展邦 18342134

### 实验目的

- 了解软件开发的基本过程
- 学习一些面向对象的编程思想
- 开发一个简单游戏



### 实验工具/学习工具

Construct 2：https://www.scirra.com/construct2



### 实验内容

### （1）如何策划一个游戏？

#### 1、创作动机

> 设计一款日常轻松娱乐易玩的2D游戏

#### 2、目标市场

> 儿童

### 3、游戏故事

> 名叫利根川的程序员，过着平凡的上班族生活，某一天通宵肝完所有的bug后，长别于这个世界。
>
> 本应如此，当他重新苏醒，却发现自己来到了异世界，自己转生为史莱姆，获得超强技能“捕食者”。
>
> 幸运的史莱姆碰上了超强魔物加鲁瓦什，并继承了它所有的魔力。
>
> 对于这只最低级魔物史莱姆来说，现在的它，魔力几乎是无限的。
>
> 魔物拥有名字后会发生奇妙的进化，在见识狼牙变成萌宠后的种种瞬间，史莱姆决定给全世界的魔物一个名字。但是给魔物起名需要花费大量的魔素，每连续起名三天，史莱姆就不得不沉睡三天。
>
> 这明显拖慢了史莱姆拯救全世界魔物的速度，于是他向技能“大贤者”请教。
>
> 原因在于加鲁瓦什的魔力过于强大，能量传输使用需要经过压缩，起名则需要使用可转化的源素。
>
> 史莱姆可是很聪明的，它想到了一个办法，把用于起名的魔素直接传输到一个大的容器里面，通过大型魔法阵将其转化为源素。但是由于魔法阵无法控制过于强大的魔素源，转化后的源素会分散在魔法阵的欧几里得空间内。
>
> 史莱姆虽然魔素几乎无限，但是也不想浪费这些源素（其实是不想让随从觉得自己的魔法阵转化率很低），决定亲自去收集散落的魔素，请你帮史莱姆收集所有的魔素吧！

#### 4、玩法

> 通过上下左右控制史莱姆，收集到的源素数量越多，分数越高
>
> 源素与传送球会随机产生在不同层空间

#### 5、部件功能

> **Player： **史莱姆
>
> **红球和蓝球：** 分别是两种传送球，史莱姆碰到红球会被传送到下一层空间，碰到蓝球会被传送到上一层空间。
>
> **七彩传送门：** 能产生红球和蓝球
>
> **源素：**三色圆台体



### （2）面向对象的分析设计方法

> Player是一个对象，定义图片为史莱姆、与传送球和源素的互动关系在event中设定；游戏运行时，移动方式为platform
>
> 源素是一个收集对象，定义图片为扁平化的三色圆台、与史莱姆的互动关系在event中设定；为了实现多个源素，定义源素类，行为方式一致且独立，位置独立，与史莱姆的互动也独立。
>
> 传送球是一个游戏里使用的工具，定义图片为颜色分明的球；同样设置不同的传送球类，给它加事件，然后就能得到传送的效果
>
> 多层空间，是为了区分源素的散落层级，采用的图片为像素橙色格子，为固定物体，设定为solid
>
> 背景，给魔物起名一般在森林，所以采用了鲜明的绿色背景，因为不需要做任何修改，放在帆布0层



### （3）编程 

> 由于在construct 2 上的实现较为繁琐，以下采用伪代码

**1.处理外部事件**

**交互设备事件**

​	通过键盘控制史莱姆：player行为添加platform

**游戏系统事件**

- system | every 4 second | 随意产生一个传送球（三种之一）
- system | every 5 second | 随机产生源素（产生在平台上）
- system | 如果史莱姆在第一层 | 不能产生蓝色传送球
- system | 如果史莱姆在最后一层 | 不能产生红色传送球

**2.处理内部事件**

| game object |          event           |                       actions                        |
| :---------: | :----------------------: | :--------------------------------------------------: |
|   史莱姆    |         碰到源素         |           源素消失、计分、更新当前源素数量           |
|   史莱姆    | 碰到传送球（UP or DOWN） | 传送球消失、特效、传送史莱姆、更新不同种类传送球数量 |
|   史莱姆    |        碰到传送门        |     传送门产生两个传送球，更新不同种类传送球数量     |

**3.具体construct 2 实现**

![](https://github.com/zhangzhanbang/homework/raw/gh-pages/images/lab2-2/event1.png)

![](https://github.com/zhangzhanbang/homework/raw/gh-pages/images/lab2-2/event2.png)

### （4）游戏设计小结

- 卡片方法其实跟(3)没有太大的区别，这里就不再提。
- 下面说一下游戏中遇到的一些问题：
- 随机产生物体容易发生重叠，重叠冲突要单独处理
- 随机产生的速度容易影响游戏体验，因此要设置全局变量加以限制
- 不同概率产生不同传送门，不能采用脚本，写起来较为繁琐
- 游戏体验增强：疯狂调参



### 最后祭出一波游戏的gif（上面吹了这么久，其实画面很一般）

![](https://github.com/zhangzhanbang/homework/raw/gh-pages/images/lab2-2/platform_game.gif)

